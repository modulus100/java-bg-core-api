spring.application.name=poc-debezium

# -------------------------------
# PoC Actuator
# -------------------------------
management.endpoint.health.show-details=always
management.health.diskspace.enabled=false
management.health.ssl.enabled=false
management.info.env.enabled=true
management.endpoints.web.exposure.include=info,health

# -------------------------------
# PoC ENVIRONMENT VARIABLES
# -------------------------------
#CDC_TABLE_INCLUDE_LIST=LUM147FCUBS.STZM_CUST_ACCOUNT,LUM147FCUBS.ACZB_CUST_GL_ENT_DLY,LUM147FCUBS.STTM_CUSTOMER,LUM147FCUBS.STTM_CUST_PERSONAL

# -------------------------------
# Debezium Embedded Engine Settings
# -------------------------------
debezium.config.name=oracle-connector
debezium.config.connector.class=io.debezium.connector.oracle.OracleConnector

# -------------------------------
# Offset Storage - MSK Kafka
# -------------------------------
debezium.config.offset.storage=org.apache.kafka.connect.storage.KafkaOffsetBackingStore
debezium.config.bootstrap.servers=localhost:9092
debezium.config.offset.storage.topic=${CDC_KAFKA_OFFSET_STORAGE_TOPIC:connect-offsets}
debezium.config.config.storage.topic=${CDC_KAFKA_CONFIG_STORAGE_TOPIC:connect-configs}
debezium.config.status.storage.topic=${CDC_KAFKA_STATUS_STORAGE_TOPIC:connect-status}
debezium.config.offset.storage.partitions=25
debezium.config.offset.storage.replication.factor=3
debezium.config.offset.flush.interval.ms=60000
#debezium.config.offset.storage.bootstrap.servers=${CDC_KAFKA_BOOTSTRAP_SERVERS:}
#debezium.config.topic.naming.strategy=io.debezium.schema.DefaultTopicNamingStrategy
debezium.config.topic.creation.enable=true

#producer.bootstap.servers

# -------------------------------
# Schema History - MSK Kafka (REQUIRED)
# -------------------------------
debezium.config.schema.history.internal=io.debezium.storage.kafka.history.KafkaSchemaHistory
debezium.config.schema.history.internal.kafka.topic=debezium-schema-history
debezium.config.schema.history.internal.kafka.bootstrap.servers=localhost:9092
debezium.config.schema.history.internal.kafka.recovery.poll.interval.ms=10000

# -------------------------------
# Kafka Producer Settings
# -------------------------------
debezium.config.producer.bootstrap.servers=localhost:9092
#debezium.config.producer.key.serializer=org.apache.kafka.common.serialization.ByteArraySerializer
#debezium.config.producer.value.serializer=org.apache.kafka.common.serialization.ByteArraySerializer
debezium.config.producer.key.serializer=org.apache.kafka.common.serialization.StringSerializer
debezium.config.producer.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# -------------------------------
# Kafka Topic Configuration
# -------------------------------
debezium.config.topic.prefix=${CDC_KAFKA_TOPIC_PREFIX:cdc-poc}


# -------------------------------
# Oracle DB Configuration
# -------------------------------
debezium.config.database.hostname=localhost
debezium.config.database.port=1521
debezium.config.database.user=C##CDC
debezium.config.database.password=cdcpass
debezium.config.database.dbname=XEPDB1
debezium.config.database.pdb.name=XEPDB1


# -------------------------------
# LogMiner Configuration
# -------------------------------
# LogMiner strategy
debezium.config.log.mining.strategy=online_catalog

# Batch processing settings
debezium.config.log.mining.batch.size.default=20000
debezium.config.log.mining.batch.size.min=1000
debezium.config.log.mining.batch.size.max=100000

# Sleep time between mining sessions
debezium.config.log.mining.sleep.time.default.ms=1000
debezium.config.log.mining.sleep.time.min.ms=0
debezium.config.log.mining.sleep.time.max.ms=3000
debezium.config.log.mining.sleep.time.increment.ms=200

# Transaction retention
debezium.config.log.mining.transaction.retention.hours=8

# Archive log configuration
debezium.config.log.mining.archive.log.hours=8
debezium.config.log.mining.archive.log.only.mode=false

# Query timeout
debezium.config.log.mining.query.filter.mode=in

# Buffer settings
debezium.config.log.mining.buffer.type=memory
debezium.config.log.mining.buffer.transaction.events.threshold=0
debezium.config.log.mining.buffer.infinispan.cache.transactions=10000
debezium.config.log.mining.buffer.infinispan.cache.events=10000


# -------------------------------
# Snapshot Configuration
# -------------------------------
debezium.config.snapshot.mode=initial
debezium.config.snapshot.locking.mode=none
debezium.config.snapshot.fetch.size=10000


# -------------------------------
# Schema and Table Filtering
# -------------------------------
debezium.config.schema.include.list=C##CDC
debezium.config.table.include.list=C##CDC.CUSTOMERS
debezium.config.database.tablename.case.insensitive=true
debezium.config.include.schema.changes=false
debezium.config.database.history.store.only.captured.tables.ddl=true
debezium.config.database.history.skip.unparseable.ddl=true


# Build JDBC URL for Spring Boot DataSource
spring.datasource.url=jdbc:oracle:thin:@//localhost:1521/XEPDB1
spring.datasource.username=C##CDC
spring.datasource.password=cdcpass
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

#logging.level.com.zaxxer.hikari=DEBUG
#logging.level.oracle.jdbc=INFO
#logging.level.io.debezium=DEBUG

#################
#debezium.config.log.level=DEBUG
#debezium.config.log.level.org.apache.kafka.clients.consumer.internals.ConsumerCoordinator=WARN
#logging.level.org.apache.kafka.clients.consumer.internals.ConsumerCoordinator=WARN
logging.level.io.debezium.connector.common.BaseSourceTask=TRACE
#logging.level.io.debezium.connector.oracle.logminer.AbstractLogMinerStreamingChangeEventSource=WARN
logging.level.io.debezium.pipeline.EventDispatcher=TRACE
#logging.level.io.debezium.connector.oracle.logminer.LogMinerQueryBuilder=DEBUG
#logging.level.io.debezium.connector.oracle.logminer.LogMinerHelper=DEBUG
#logging.level.org.apache.kafka.clients.NetworkClient=WARN
#logging.level.org.apache.kafka.connect.runtime.WorkerConfig=WARN
#logging.level.org.apache.kafka.connect.runtime.Worker=WARN


#logging.level.org.apache.kafka=DEBUG
#logging.level.org.apache.kafka.clients.producer=TRACE